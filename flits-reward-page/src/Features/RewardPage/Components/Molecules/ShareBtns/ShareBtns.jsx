import React, { useState, useEffect, useCallback } from "react";
import { ReferralLink } from "../../Helpers/ReferralLink";
import { useTranslationLanguage } from "../../Helpers/UseTranslation";
import "./style.css";

function ShareBtns() {
  const [navigatorAvailable, setNavigatorAvailable] = useState(false);
  const { themeT } = useTranslationLanguage();
  const shareText = themeT(
    "flits.refer_friend_page.referral_program_invitation_message",
    "You can earn credit for creating an account with {{ shop_name }}. Use this link and get rewarded : {{ link }}"
  )
    .replace("{{ shop_name }}", window.flitsRewardPageObjects.shopName)
    .replace("{{ link }}", ReferralLink());

  const getNavigator = useCallback(() => {
    var data = {
      title: "Refer Freind",
      text: shareText,
    };
    if (navigator.share && navigator.canShare(data)) {
      setNavigatorAvailable(true);
    } else {
      setNavigatorAvailable(false);
    }
  }, [shareText]);
  function wpShare() {
    let encodedDescription = encodeURIComponent(unescape(shareText));
    let url = "https://api.whatsapp.com/send?text=" + encodedDescription;
    window.open(url);
  }
  function navigatorShare() {
    let encodedDescription = shareText;
    var data = {
      title: "Refer Freind",
      text: encodedDescription,
    };
    if (navigator.share && navigator.canShare(data)) {
      navigator.share(data);
    } else {
      alert(
        `Navigator share is not supported by your browser. ${encodedDescription}`
      );
    }
  }
  // function emailShare() {
  //   let subject = "Refer And earn";
  //   let encodedDescription = encodeURIComponent(unescape(shareText));
  //   let mailtoLink = `mailto:?subject=${encodeURIComponent(
  //     subject
  //   )}&body=${encodeURIComponent(encodedDescription)}`;
  //   window.location.href = mailtoLink;
  // }
  function fbShare() {
    let url =
      "https://www.facebook.com/sharer/sharer.php?u=" +
      encodeURIComponent(unescape(ReferralLink())) +
      "&quote=" +
      shareText;
    window.open(url);
  }
  useEffect(() => {
    getNavigator();
  }, [getNavigator]);
  return (
    <>
      <div
        className="flits-reward-page-wp-share-btn flits-reward-page-social-share-main"
        onClick={wpShare}
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="31"
          height="31"
          viewBox="0 0 31 31"
          fill="none"
        >
          <path
            d="M30.1432 7.55143C30.1268 6.92227 30.0782 6.29436 29.9974 5.67018C29.8885 5.12349 29.707 4.5938 29.4578 4.09518C29.1972 3.55429 28.8471 3.06126 28.4224 2.63685C27.9938 2.21715 27.5016 1.86771 26.9641 1.60143C26.4648 1.35708 25.9351 1.18052 25.3891 1.07643C24.7708 0.983827 24.1474 0.930249 23.5224 0.916016H7.61198C6.98281 0.932402 6.3549 0.981077 5.73073 1.06185C5.18404 1.17074 4.65435 1.35221 4.15573 1.60143C3.61484 1.86209 3.12181 2.21214 2.6974 2.63685C2.27769 3.06547 1.92826 3.55763 1.66198 4.09518C1.41763 4.59446 1.24107 5.12415 1.13698 5.67018C1.04437 6.28842 0.990796 6.91188 0.976562 7.53685C0.976562 7.81393 0.976562 8.20768 0.976562 8.32435V22.6743C0.976562 22.8348 0.976562 23.1848 0.976562 23.4473C0.992949 24.0764 1.04162 24.7043 1.1224 25.3285C1.23129 25.8752 1.41275 26.4049 1.66198 26.9035C1.92264 27.4444 2.27269 27.9374 2.6974 28.3618C3.12601 28.7815 3.61818 29.131 4.15573 29.3973C4.65501 29.6416 5.18469 29.8182 5.73073 29.9223C6.34897 30.0149 6.97242 30.0684 7.5974 30.0827H23.5078C24.137 30.0663 24.7649 30.0176 25.3891 29.9368C25.9358 29.828 26.4654 29.6465 26.9641 29.3973C27.5049 29.1366 27.998 28.7866 28.4224 28.3618C28.8421 27.9332 29.1915 27.4411 29.4578 26.9035C29.7022 26.4042 29.8787 25.8745 29.9828 25.3285C30.0754 24.7103 30.129 24.0868 30.1432 23.4618C30.1432 23.1848 30.1432 22.8348 30.1432 22.6743V8.32435C30.1432 8.20768 30.1432 7.81393 30.1432 7.55143ZM15.8953 25.7077C14.1439 25.699 12.4232 25.2475 10.8932 24.3952L5.35156 25.8535L6.8099 20.4285C5.86944 18.8483 5.36613 17.0465 5.35156 15.2077C5.35737 13.1411 5.97457 11.1225 7.12542 9.406C8.27627 7.68954 9.90932 6.352 11.8189 5.56185C13.7284 4.7717 15.8291 4.56429 17.8563 4.96572C19.8835 5.36715 21.7466 6.35948 23.2109 7.81773C24.6753 9.27598 25.6753 11.1349 26.0852 13.1605C26.4951 15.186 26.2964 17.2875 25.5142 19.2003C24.732 21.1131 23.4012 22.7517 21.6896 23.9097C19.9779 25.0677 17.9618 25.6933 15.8953 25.7077ZM15.8807 6.39935C14.3346 6.41704 12.8354 7.00453 11.508 7.79751C10.1806 8.59048 9.08705 9.72104 8.33866 11.0741C7.59027 12.4271 7.21378 13.9543 7.24752 15.5001C7.28126 17.046 7.72402 18.5553 8.53073 19.8743L8.7349 20.2098L7.8599 23.4035L11.1849 22.4993L11.5057 22.6889C12.8322 23.4702 14.3413 23.8878 15.8807 23.8993C18.2014 23.8993 20.427 22.9775 22.0679 21.3365C23.7089 19.6956 24.6307 17.47 24.6307 15.1493C24.6307 12.8287 23.7089 10.6031 22.0679 8.96216C20.427 7.32122 18.2014 6.39935 15.8807 6.39935ZM20.9995 18.9848C20.8085 19.3034 20.5527 19.5783 20.2488 19.7918C19.9448 20.0054 19.5994 20.1527 19.2349 20.2243C18.6903 20.3239 18.1296 20.2889 17.6016 20.1223C17.1048 19.967 16.6178 19.7819 16.1432 19.5681C14.3404 18.6634 12.8028 17.3068 11.6807 15.6306C11.071 14.854 10.701 13.9164 10.6161 12.9327C10.6075 12.524 10.6848 12.1181 10.843 11.7413C11.0013 11.3644 11.237 11.0251 11.5349 10.7452C11.6226 10.6457 11.7303 10.5657 11.8509 10.5105C11.9714 10.4552 12.1023 10.4259 12.2349 10.4243H12.6432C12.8036 10.4243 13.0224 10.4243 13.2266 10.8764C13.4307 11.3285 13.9703 12.6848 14.0432 12.816C14.0791 12.886 14.0977 12.9635 14.0977 13.0421C14.0977 13.1207 14.0791 13.1981 14.0432 13.2681C13.9788 13.4266 13.8902 13.5741 13.7807 13.7056C13.6495 13.866 13.5036 14.0556 13.387 14.1723C13.2703 14.2889 13.1245 14.4348 13.2703 14.6973C13.6671 15.3669 14.1583 15.9759 14.7286 16.5056C15.3498 17.0545 16.06 17.4934 16.8286 17.8035C17.0911 17.9348 17.2516 17.9202 17.3974 17.8035C17.5432 17.6868 18.0536 17.0452 18.2286 16.7827C18.4036 16.5202 18.5786 16.5639 18.812 16.6514C19.0453 16.7389 20.3432 17.366 20.6057 17.4973C20.8682 17.6285 21.0286 17.6868 21.1016 17.8035C21.1648 18.1852 21.1297 18.5767 20.9995 18.941V18.9848Z"
            fill="black"
          />
        </svg>
      </div>
      <div
        className="flits-reward-page-fb-share-btn flits-reward-page-social-share-main"
        onClick={fbShare}
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="36"
          height="35"
          viewBox="0 0 36 35"
          fill="none"
        >
          <path
            d="M30.5391 2.91602H4.58073C4.15528 2.91602 3.74725 3.08503 3.44641 3.38587C3.14557 3.6867 2.97656 4.09473 2.97656 4.52018V30.4785C2.97656 30.6892 3.01806 30.8978 3.09867 31.0924C3.17929 31.287 3.29745 31.4639 3.44641 31.6128C3.59537 31.7618 3.77221 31.88 3.96684 31.9606C4.16147 32.0412 4.37007 32.0827 4.58073 32.0827H18.5516V20.7806H14.7599V16.4056H18.5516V13.1243C18.473 12.354 18.564 11.5758 18.818 10.8443C19.0721 10.1128 19.4831 9.44577 20.0222 8.88995C20.5614 8.33413 21.2156 7.90299 21.939 7.62678C22.6624 7.35057 23.4375 7.23597 24.2099 7.29102C25.345 7.28403 26.4795 7.34246 27.6078 7.46602V11.4035H25.2891C23.4516 11.4035 23.1016 12.2785 23.1016 13.5473V16.3618H27.4766L26.9078 20.7368H23.1016V32.0827H30.5391C30.7497 32.0827 30.9583 32.0412 31.1529 31.9606C31.3476 31.88 31.5244 31.7618 31.6734 31.6128C31.8223 31.4639 31.9405 31.287 32.0211 31.0924C32.1017 30.8978 32.1432 30.6892 32.1432 30.4785V4.52018C32.1432 4.30952 32.1017 4.10092 32.0211 3.90629C31.9405 3.71167 31.8223 3.53483 31.6734 3.38587C31.5244 3.2369 31.3476 3.11874 31.1529 3.03813C30.9583 2.95751 30.7497 2.91602 30.5391 2.91602Z"
            fill="black"
          />
        </svg>
      </div>
      {navigatorAvailable ? (
        <div
          className="flits-reward-page-navigator-share-btn flits-reward-page-social-share-main"
          onClick={navigatorShare}
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="30"
            height="31"
            viewBox="0 0 30 31"
            fill="none"
          >
            <rect
              x="0.0605469"
              y="0.561035"
              width="29.878"
              height="29.878"
              rx="3.41463"
              fill="#171717"
            />
            <path
              d="M12.7395 15.4979C12.7395 15.5505 12.7276 15.6 12.7245 15.6522L18.2301 18.4042C18.7015 18.0051 19.3045 17.756 19.9707 17.756C21.4685 17.7565 22.6823 18.9702 22.6823 20.4677C22.6823 21.9671 21.4685 23.1808 19.9707 23.1808C18.4717 23.1808 17.2591 21.9671 17.2591 20.4677C17.2591 20.4137 17.2711 20.3654 17.2742 20.3132L11.7686 17.5612C11.2958 17.9588 10.6942 18.2079 10.028 18.2079C8.53031 18.2079 7.31641 16.9954 7.31641 15.4979C7.31641 13.9988 8.53031 12.7848 10.028 12.7848C10.6942 12.7848 11.296 13.0354 11.7686 13.433L17.2742 10.681C17.2711 10.6284 17.2591 10.5789 17.2591 10.525C17.2591 9.02884 18.4717 7.81494 19.9707 7.81494C21.4685 7.81494 22.6823 9.02884 22.6823 10.525C22.6823 12.024 21.4685 13.2381 19.9707 13.2381C19.303 13.2381 18.701 12.9874 18.2301 12.5883L12.7245 15.3418C12.7274 15.3944 12.7395 15.4439 12.7395 15.4979Z"
              fill="white"
            />
          </svg>
        </div>
      ) : null}
    </>
  );
}

export default ShareBtns;
